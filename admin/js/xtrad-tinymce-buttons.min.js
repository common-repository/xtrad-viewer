/*! xtrad-viewer 06-12-2019 */

var tinymceloaded=!1;jQuery(document).ready(function(o){"undefined"!=typeof tinymce&&null!=tinymce&&tinymce.PluginManager.add("xtradbutton",function(a,e){var t={action:"list_scenes"},n=window.location.href,i=n.indexOf("/wp-admin"),l=n.substring(0,i)+"/wp-admin/admin-ajax.php";a.addButton("xtradbutton",{text:tinyMCE_object.button_name,icon:!1,onclick:function(){jQuery.post(l,t,function(e){var t=JSON.parse(e).scenes;a.windowManager.open({title:tinyMCE_object.button_title,body:[{type:"textbox",name:"img",label:tinyMCE_object.image_title,value:"",classes:"my_input_image"},{type:"button",name:"my_upload_button",label:"",text:tinyMCE_object.image_button_title,classes:"my_upload_button"},{type:"listbox",name:"listbox",label:"Xtrad Scene",values:t,value:"0"},{type:"checkbox",name:"checkbox",label:"Include OrbitControl",text:"Include OrbitControl",checked:!0},{type:"textbox",name:"minpolarangle",label:"Minimum Polar Angle (0 -> 180) - Vertical in degrees",text:"Minimum Polar Angle - Vertical in degrees",value:"0"},{type:"textbox",name:"maxpolarangle",label:"Maximum Polar Angle (0 -> 180) - Vertical in degrees",text:"Maximum Polar Angle - Vertical in degrees",value:"90"},{type:"textbox",name:"minazimuthangle",label:"Minimum Azimuth Angle (-infinity -> infinity) - horizontal in degrees - leave blank for no constraint",text:"Minimum Azimuth Angle (horizontal in degrees)",value:""},{type:"textbox",name:"maxazimuthangle",label:"Maximum Azimuth Angle (-infinity -> infinity) - horizontal in degrees - leave blank for no constraint",text:"Maximum Azimuth Angle (horizontal in degrees)",value:""},{type:"textbox",name:"mindistance",label:"Minimum Distance for Zoom",text:"Minimum Distance for Zoom",value:"10"},{type:"textbox",name:"maxdistance",label:"Maximum Distance for Zoom",text:"Maximum Distance for Zoom",value:"1000"}],onsubmit:function(e){e.data.minpolarangle<0&&(e.data.minpolarangle=0),180<e.data.maxpolarangle&&(e.data.maxpolarangle=180),a.insertContent('[xtradscene img="'+e.data.img+'" id="'+e.data.listbox+'" orbit="'+e.data.checkbox+'" MinPolarAngle="'+e.data.minpolarangle+'" MaxPolarAngle="'+e.data.maxpolarangle+'" MinAzimuthAngle="'+e.data.minazimuthangle+'" MaxAzimuthAngle="'+e.data.maxazimuthangle+'" MinDistance="'+e.data.mindistance+'" MaxDistance="'+e.data.maxdistance+'"]')}})})}}),jQuery(document).on("tinymce-editor-init",function(e,t){tinymceloaded=!0}),o(document).on("click",".mce-my_upload_button",function(e){e.preventDefault();var t=o(".mce-my_input_image"),a=wp.media.frames.file_frame=wp.media({title:"Add Image",button:{text:"Add Image"},multiple:!1});a.on("select",function(){var e=a.state().get("selection").first().toJSON();t.val(e.url)}),a.open()})})});